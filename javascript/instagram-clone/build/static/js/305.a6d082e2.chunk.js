"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[305],{287:function(e,r,n){var t=n(791),s=n(303),o=n(307),c=n(155),a=n(87),u=n(184);r.Z=function(){var e=(0,t.useContext)(s.Z).firebase,r=(0,t.useContext)(o.Z).user;return(0,u.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary mb-8",children:(0,u.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:(0,u.jsxs)("div",{className:"flex justify-between h-full",children:[(0,u.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items cursor-pointer",children:(0,u.jsx)("h1",{className:"flex justify-center w-full",children:(0,u.jsx)(a.rU,{to:c.h1,children:(0,u.jsx)("img",{src:"/images/insta-logo.png",alt:"Instagram",className:"mt-2 w-6/12"})})})}),(0,u.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items gap-2.5 ",children:r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.rU,{to:c.h1,children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}),(0,u.jsx)("button",{type:"button",onClick:function(){return e.auth().signOut()},onKeyDown:function(r){"Enter"===r.key&&e.auth().signOut()},children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})})}),(0,u.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,u.jsx)(a.rU,{to:"/p/".concat(r.displayName),children:(0,u.jsx)("img",{src:"/images/avatars/".concat(r.displayName,".jpg"),alt:"".concat(r.displayName," profile pic"),className:"rounded-full h-6 w-6 flex"})})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.rU,{to:c.ym,children:(0,u.jsx)("button",{type:"button",className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",children:"Log in"})}),(0,u.jsx)(a.rU,{to:c.kp,children:(0,u.jsx)("button",{type:"button",className:"font-bold text-sm rounded text-blue-medium w-20 h-8",children:"Sign up"})})]})})]})})})}},920:function(e,r,n){var t=n(165),s=n(861),o=n(439),c=n(791),a=n(307),u=n(606);r.Z=function(){var e=(0,c.useState)({}),r=(0,o.Z)(e,2),n=r[0],i=r[1],l=(0,c.useContext)(a.Z).user;return(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.xD)(l.uid);case 2:r=e.sent,i(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!==l&&void 0!==l&&l.uid&&e()}),[l]),{user:n}}},305:function(e,r,n){n.r(r),n.d(r,{default:function(){return v}});var t=n(165),s=n(861),o=n(439),c=n(791),a=n(689),u=n(606),i=n(155),l=n(683),d=n(839),f=n(920),p=n(184),h=function(e){var r=e.photosCount,n=e.profile,a=n.docId,i=n.userId,l=n.fullName,h=n.following,m=void 0===h?[]:h,x=n.followers,w=void 0===x?[]:x,v=n.username,g=e.followersCount,Z=e.setFollowersCount,j=(0,f.Z)().user;j.length>0&&(j=j[0]);var b=(0,c.useState)(!1),y=(0,o.Z)(b,2),N=y[0],k=y[1],C=j.username&&j.username!==v,I=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k((function(e){return!e})),Z({followersCount:N?g-1:g+1}),e.next=4,(0,u.Gm)(N,j.docId,a,i,j.userId);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.IU)(j.username,i);case 2:r=e.sent,k(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){j.username&&i&&U()}),[j,i]),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[(0,p.jsx)("div",{className:"container flex-justify-center",children:j.username&&(0,p.jsx)("img",{src:"/images/avatars/".concat(v,".jpg"),className:"rounded-full h-40 w-40 flex",alt:"".concat(v," profile")})}),(0,p.jsxs)("div",{className:"flex items-center justify-center flex-col col-span-2",children:[(0,p.jsxs)("div",{className:"container flex items-center",children:[(0,p.jsx)("p",{className:"text-2xl mr-4",children:v}),C&&(0,p.jsx)("button",{className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",type:"button",onClick:I,children:N?"Unfollow":"Follow"})]}),(0,p.jsx)("div",{className:"container flex mt-4",children:void 0===w||void 0===m?(0,p.jsx)(d.Z,{count:1,width:677,height:24}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"mr-10",children:[(0,p.jsx)("span",{className:"font-bold",children:r})," ","Photos"]}),(0,p.jsxs)("p",{className:"mr-10",children:[(0,p.jsx)("span",{className:"font-bold",children:g})," ",1===g?"follower":"followers"]}),(0,p.jsxs)("p",{className:"mr-10",children:[(0,p.jsx)("span",{className:"font-bold",children:m.length})," ","following"]})]})}),(0,p.jsx)("div",{className:"container mt-4",children:(0,p.jsx)("p",{className:"font-medium",children:l||(0,p.jsx)(d.Z,{count:1,width:677,height:24})})})]})]})},m=function(e){var r=e.photos;return(0,p.jsxs)("div",{className:"h-16 border-gray-primary mt-12 pt-4",children:[(0,p.jsx)("div",{className:"grid grid-cols-3 gap-8 mt-4 mb-12",children:r?r.length>0?r.map((function(e){return(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("img",{src:e.imageSrc,alt:e.caption}),(0,p.jsxs)("div",{className:"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden",children:[(0,p.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),e.likes.length]}),(0,p.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),e.comments.length]})]})]},e.docId)})):(0,p.jsx)(p.Fragment,{}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.Z,{count:12,width:320,height:400})})}),!r||0===r.length&&(0,p.jsx)("p",{className:"text-center text-2xl",children:"No Posts"})]})},x=function(e){var r=e.user,n=(0,c.useReducer)((function(e,r){return(0,l.Z)((0,l.Z)({},e),r)}),{profile:{},photosCollection:[],followersCount:0}),a=(0,o.Z)(n,2),i=a[0],d=i.profile,f=i.photosCollection,x=i.followersCount,w=a[1];return(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ZQ)(r);case 2:s=e.sent,w({profile:r,photosCollection:s,followersCount:null===(n=r.followers)||void 0===n?void 0:n.length});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r&&e()}),[r]),(0,p.jsxs)("div",{children:[(0,p.jsx)(h,{photosCount:f?f.length:0,profile:d,followersCount:x,setFollowersCount:w}),(0,p.jsx)(m,{photos:f})]})},w=n(287),v=function(){var e=(0,a.UO)().username,r=(0,c.useState)(!1),n=(0,o.Z)(r,2),l=n[0],d=n[1],f=(0,c.useState)(null),h=(0,o.Z)(f,2),m=h[0],v=h[1],g=(0,a.s0)();return(0,c.useEffect)((function(){var r=function(){var r=(0,s.Z)((0,t.Z)().mark((function r(){var n;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.dQ)(e);case 2:(n=r.sent).length>0?(v(n[0]),d(!0)):(d(!1),g(i.Hi));case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[e,g]),l?(0,p.jsx)("div",{className:"bg-gray-background",children:(0,p.jsxs)("div",{className:"mx-auto max-w-screen-lg",children:[(0,p.jsx)(w.Z,{}),(0,p.jsx)(x,{user:m})]})}):(0,p.jsx)(p.Fragment,{})}},606:function(e,r,n){n.d(r,{Gm:function(){return w},IU:function(){return x},NS:function(){return f},T6:function(){return p},ZQ:function(){return m},dQ:function(){return i},ve:function(){return d},wP:function(){return h},xD:function(){return l},zl:function(){return u}});var t=n(439),s=n(683),o=n(165),c=n(861),a=n(16),u=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("users").where("username","==",r).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.data().length>0})));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("users").where("username","==",r).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("users").where("userId","==",r).get();case 2:return n=e.sent,t=n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("users").limit(10).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!n.includes(e.userId)})));case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n,t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.w.firestore().collection("users").doc(r).update({following:t?a.G.arrayRemove(n):a.G.arrayUnion(n)}));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n,t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.w.firestore().collection("users").doc(r).update({followers:t?a.G.arrayRemove(n):a.G.arrayUnion(n)}));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n){var t,u,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("photos").where("userId","in",n).get();case 2:return t=e.sent,u=t.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(u.map(function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n){var t,c,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n.likes.includes(r)&&(t=!0),e.next=4,l(n.userId);case 4:return c=e.sent,a=c[0].username,e.abrupt("return",(0,s.Z)((0,s.Z)({username:a},n),{},{userLikedPhoto:t}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("photos").where("userId","==",r.userId).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),x=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n){var c,u,i,l,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.w.firestore().collection("users").where("username","==",r).where("following","array-contains",n).get();case 2:return c=e.sent,u=c.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),i=(0,t.Z)(u,1),l=i[0],d=void 0===l?{}:l,e.abrupt("return",!!d.userId);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r,n,t,s,c){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n,s,r);case 2:return e.next=4,p(t,c,r);case 4:case"end":return e.stop()}}),e)})));return function(r,n,t,s,o){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=305.a6d082e2.chunk.js.map