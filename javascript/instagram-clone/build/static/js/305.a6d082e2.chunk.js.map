{"version":3,"file":"static/js/305.a6d082e2.chunk.js","mappings":"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","sources":["components/header.js","hooks/use-user.js","components/profile/profile-header.js","components/profile/photos.js","components/profile/index.js","pages/profile.js","services/firebase.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport firebaseContext from \"../context/firebase\";\nimport UserContext from \"../context/user\";\nimport * as ROUTES from \"../constants/routes\";\nimport { Link } from \"react-router-dom\";\n\nconst Header = () => {\n  const { firebase } = useContext(firebaseContext);\n  const { user } = useContext(UserContext);\n\n  return (\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\n        <div className=\"flex justify-between h-full\">\n          <div className=\"text-gray-700 text-center flex items-center align-items cursor-pointer\">\n            <h1 className=\"flex justify-center w-full\">\n              <Link to={ROUTES.DASHBOARD}>\n                <img\n                  src=\"/images/insta-logo.png\"\n                  alt=\"Instagram\"\n                  className=\"mt-2 w-6/12\"\n                />\n              </Link>\n            </h1>\n          </div>\n          <div className=\"text-gray-700 text-center flex items-center align-items gap-2.5 \">\n            {user ? (\n              <>\n                <Link to={ROUTES.DASHBOARD}>\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth={1.5}\n                    stroke=\"currentColor\"\n                    className=\"w-6 h-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25\"\n                    />\n                  </svg>\n                </Link>\n\n                <button\n                  type=\"button\"\n                  onClick={() => firebase.auth().signOut()}\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\") {\n                      firebase.auth().signOut();\n                    }\n                  }}\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth={1.5}\n                    stroke=\"currentColor\"\n                    className=\"w-6 h-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9\"\n                    />\n                  </svg>\n                </button>\n                <div className=\"flex items-center cursor-pointer\">\n                  <Link to={`/p/${user.displayName}`}>\n                    <img\n                      src={`/images/avatars/${user.displayName}.jpg`}\n                      alt={`${user.displayName} profile pic`}\n                      className=\"rounded-full h-6 w-6 flex\"\n                    />\n                  </Link>\n                </div>\n              </>\n            ) : (\n              <>\n                <Link to={ROUTES.LOGIN}>\n                  <button\n                    type=\"button\"\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n                  >\n                    Log in\n                  </button>\n                </Link>\n                <Link to={ROUTES.SIGNUP}>\n                  <button type=\"button\" className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\">Sign up</button>\n                </Link>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import { useState, useEffect, useContext } from \"react\";\nimport UserContext from \"../context/user\";\nimport { getUserByUserId } from \"../services/firebase\";\n\nconst useUser = () => {\n  const [activeUser, setActiveUser] = useState({});\n  const { user } = useContext(UserContext);\n\n  useEffect(() => {\n    const getUserObjByUserId = async () => {\n      const response = await getUserByUserId(user.uid);\n      setActiveUser(response);\n    };\n    if (user?.uid) {\n      getUserObjByUserId();\n    }\n  }, [user]);\n\n  return { user: activeUser };\n};\n\nexport default useUser;\n","import React, { useState, useEffect } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport useUser from \"../../hooks/use-user\";\nimport { isUserFollowingProfile, toggleFollow } from \"../../services/firebase\";\n\nconst ProfileHeader = ({\n  photosCount,\n  profile: {\n    docId: profileDocId,\n    userId: profileUserId,\n    fullName,\n    following = [],\n    followers = [],\n    username: profileUsername,\n  },\n  followersCount,\n  setFollowersCount,\n}) => {\n  let { user } = useUser();\n  if (user.length > 0) user = user[0];\n  const [isFollowingProfile, setIsFollowingProfile] = useState(false);\n\n  const activeBtnFollow = user.username && user.username !== profileUsername;\n\n  const handleToggleFollow = async () => {\n    setIsFollowingProfile((isFollowingProfile) => !isFollowingProfile);\n    setFollowersCount({\n      followersCount: isFollowingProfile\n        ? followersCount - 1\n        : followersCount + 1,\n    });\n    await toggleFollow(\n      isFollowingProfile,\n      user.docId,\n      profileDocId,\n      profileUserId,\n      user.userId\n    );\n  };\n\n  const isLoggedInUserFollowingProfile = async () => {\n    const isFollowing = await isUserFollowingProfile(\n      user.username,\n      profileUserId\n    );\n    setIsFollowingProfile(isFollowing);\n  };\n\n  useEffect(() => {\n    if (user.username && profileUserId) {\n      isLoggedInUserFollowingProfile();\n    }\n  }, [user, profileUserId]);\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\n      <div className=\"container flex-justify-center\">\n        {user.username && (\n          <img\n            src={`/images/avatars/${profileUsername}.jpg`}\n            className=\"rounded-full h-40 w-40 flex\"\n            alt={`${profileUsername} profile`}\n          />\n        )}\n      </div>\n      <div className=\"flex items-center justify-center flex-col col-span-2\">\n        <div className=\"container flex items-center\">\n          <p className=\"text-2xl mr-4\">{profileUsername}</p>\n          {activeBtnFollow && (\n            <button\n              className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n              type=\"button\"\n              onClick={handleToggleFollow}\n            >\n              {isFollowingProfile ? \"Unfollow\" : \"Follow\"}\n            </button>\n          )}\n        </div>\n        <div className=\"container flex mt-4\">\n          {followers === undefined || following === undefined ? (\n            <Skeleton count={1} width={677} height={24} />\n          ) : (\n            <>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{photosCount}</span>\n                {` `}\n                Photos\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{followersCount}</span>\n                {` `}\n                {followersCount === 1 ? \"follower\" : \"followers\"}\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{following.length}</span>\n                {` `}\n                following\n              </p>\n            </>\n          )}\n        </div>\n        <div className=\"container mt-4\">\n          <p className=\"font-medium\">\n            {!fullName ? (\n              <Skeleton count={1} width={677} height={24} />\n            ) : (\n              fullName\n            )}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileHeader;\n","import React from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\n\nconst Photos = ({ photos }) => {\n  return (\n    <div className=\"h-16 border-gray-primary mt-12 pt-4\">\n      <div className=\"grid grid-cols-3 gap-8 mt-4 mb-12\">\n        {!photos ? (\n          <>\n            <Skeleton count={12} width={320} height={400} />\n          </>\n        ) : photos.length > 0 ? (\n          photos.map((photo) => (\n            <div key={photo.docId} className=\"relative group\">\n              <img src={photo.imageSrc} alt={photo.caption} />\n              <div className=\"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden\">\n                <p className=\"flex items-center text-white font-bold\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                    className=\"w-8 mr-4\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                  {photo.likes.length}\n                </p>\n\n                <p className=\"flex items-center text-white font-bold\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                    className=\"w-8 mr-4\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                  {photo.comments.length}\n                </p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <></>\n        )}\n      </div>\n      {!photos ||\n        (photos.length === 0 && (\n          <p className=\"text-center text-2xl\">No Posts</p>\n        ))}\n    </div>\n  );\n};\n\nexport default Photos;\n","import React, { useState, useEffect, useReducer } from \"react\";\nimport { getUserPhotos } from \"../../services/firebase\";\nimport ProfileHeader from \"./profile-header\";\nimport Photos from \"./photos\";\n\nconst UserProfile = ({ user }) => {\n\n  const reducer = (state, newState) => ({ ...state, ...newState });\n  const initialState = {\n    profile: {},\n    photosCollection: [],\n    followersCount: 0,\n  };\n\n  const [{ profile, photosCollection, followersCount }, dispatch] = useReducer(\n    reducer,\n    initialState\n  );\n\n  useEffect(() => {\n    const getProfileInfoAndPhotos = async () => {\n      const photos = await getUserPhotos(user);\n      dispatch({\n        profile: user,\n        photosCollection: photos,\n        followersCount: user.followers?.length,\n      });\n    };\n\n    if (user) getProfileInfoAndPhotos();\n  }, [user]);\n  return (\n    <div>\n      <ProfileHeader\n        photosCount={photosCollection ? photosCollection.length : 0}\n        profile={profile}\n        followersCount={followersCount}\n        setFollowersCount={dispatch}\n      />\n      <Photos photos={photosCollection} />\n    </div>\n  );\n};\n\nexport default UserProfile;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { getUserByUsername } from \"../services/firebase\";\nimport * as ROUTES from \"../constants/routes\";\nimport UserProfile from \"../components/profile\";\nimport Header from \"../components/header\";\n\nconst Profile = () => {\n  const { username } = useParams();\n  const [userExists, setUserExists] = useState(false);\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const checkUserExists = async () => {\n      const user = await getUserByUsername(username);\n      if (user.length > 0) {\n        setUser(user[0]);\n        setUserExists(true);\n      } else {\n        setUserExists(false);\n        navigate(ROUTES.NOT_FOUND);\n      }\n    };\n    checkUserExists();\n  }, [username, navigate]);\n\n  return userExists ? (\n    <div className=\"bg-gray-background\">\n      <div className=\"mx-auto max-w-screen-lg\">\n        <Header />\n        <UserProfile user={user} />\n      </div>\n    </div>\n  ) : (\n    <></>\n  );\n};\n\nexport default Profile;\n","import { firebase, FieldValue } from \"../lib/firebase\";\n\nconst doesUsernameExists = async (username) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username)\n    .get();\n\n  return result.docs.map((user) => user.data().length > 0);\n};\n\nconst getUserByUsername = async (username) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username)\n    .get();\n\n  return result.docs.map((item) => ({ ...item.data(), docId: item.id }));\n};\n\n// get user from the firestore where userId === userId(passed from auth)\nconst getUserByUserId = async (userId) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"==\", userId)\n    .get();\n\n  const user = result.docs.map((item) => ({ ...item.data(), docId: item.id }));\n  return user;\n};\n\nconst getSuggestedProfiles = async (userId, following) => {\n  const result = await firebase.firestore().collection(\"users\").limit(10).get();\n  return result.docs\n    .map((user) => ({ ...user.data(), docId: user.id }))\n    .filter(\n      (profile) =>\n        profile.userId !== userId && !following.includes(profile.userId)\n    );\n};\n\nconst updateLoggedInUserFollowing = async (\n  loggedInUserDocId,\n  profileId,\n  isFollowingProfile\n) => {\n  return firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(loggedInUserDocId)\n    .update({\n      following: isFollowingProfile\n        ? FieldValue.arrayRemove(profileId)\n        : FieldValue.arrayUnion(profileId),\n    });\n};\n\nconst updateFollowedUserFollowers = async (\n  suggestedDocId,\n  userId,\n  isFollowingProfile\n) => {\n  return firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(suggestedDocId)\n    .update({\n      followers: isFollowingProfile\n        ? FieldValue.arrayRemove(userId)\n        : FieldValue.arrayUnion(userId),\n    });\n};\n\nconst getPhotos = async (userId, following) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"in\", following)\n    .get();\n\n  const userFollowedPhotos = result.docs.map((photo) => ({\n    ...photo.data(),\n    docId: photo.id,\n  }));\n\n  const photosWithUserDetails = await Promise.all(\n    userFollowedPhotos.map(async (photo) => {\n      let userLikedPhoto = false;\n      if (photo.likes.includes(userId)) userLikedPhoto = true;\n      const user = await getUserByUserId(photo.userId);\n      const { username } = user[0];\n      return { username, ...photo, userLikedPhoto };\n    })\n  );\n  return photosWithUserDetails;\n};\n\nconst getUserPhotos = async (user) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"==\", user.userId)\n    .get();\n\n  return result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n};\n\nconst isUserFollowingProfile = async (loggedInUserUsername, profileUserId) => {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", loggedInUserUsername)\n    .where(\"following\", \"array-contains\", profileUserId)\n    .get();\n\n  const [response = {}] = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n\n  return response.userId ? true : false;\n};\n\nconst toggleFollow = async (\n  isFollowingProfile,\n  activeUserDocId,\n  profileDocId,\n  profileUserId,\n  followingUserId\n) => {\n  await updateLoggedInUserFollowing(\n    activeUserDocId,\n    profileUserId,\n    isFollowingProfile\n  );\n  await updateFollowedUserFollowers(\n    profileDocId,\n    followingUserId,\n    isFollowingProfile\n  );\n};\n\nexport {\n  doesUsernameExists,\n  getUserByUserId,\n  getUserByUsername,\n  getSuggestedProfiles,\n  updateFollowedUserFollowers,\n  updateLoggedInUserFollowing,\n  getPhotos,\n  getUserPhotos,\n  isUserFollowingProfile,\n  toggleFollow,\n};\n"],"names":["firebase","useContext","firebaseContext","user","UserContext","className","to","ROUTES","src","alt","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","type","onClick","auth","signOut","onKeyDown","e","key","displayName","useState","activeUser","setActiveUser","useEffect","getUserObjByUserId","getUserByUserId","uid","response","photosCount","profile","profileDocId","docId","profileUserId","userId","fullName","following","followers","profileUsername","username","followersCount","setFollowersCount","useUser","length","isFollowingProfile","setIsFollowingProfile","activeBtnFollow","handleToggleFollow","toggleFollow","isLoggedInUserFollowingProfile","isUserFollowingProfile","isFollowing","undefined","count","width","height","photos","map","photo","imageSrc","caption","fillRule","clipRule","likes","comments","useReducer","state","newState","photosCollection","dispatch","getProfileInfoAndPhotos","getUserPhotos","useParams","userExists","setUserExists","setUser","navigate","useNavigate","checkUserExists","getUserByUsername","doesUsernameExists","collection","where","get","result","docs","data","item","id","getSuggestedProfiles","limit","filter","includes","updateLoggedInUserFollowing","loggedInUserDocId","profileId","doc","update","FieldValue","updateFollowedUserFollowers","suggestedDocId","getPhotos","userFollowedPhotos","Promise","all","userLikedPhoto","photosWithUserDetails","loggedInUserUsername","activeUserDocId","followingUserId"],"sourceRoot":""}